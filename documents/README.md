# HugMeDo プロジェクトドキュメント

## プロジェクト概要

HugMeDoは、コンテナ化モジュラーモノリスを採用した医療情報システムです。ビデオ通話機能（OHRモジュール）とメンタルヘルスチェック機能（HALCAモジュール）を中心に構成され、AWSクラウド環境でのデプロイを前提としています。

## ドキュメント構造

このリポジトリには、HugMeDoプロジェクトの設計、開発、運用に関する包括的なドキュメントが含まれています。以下に各ディレクトリとサブディレクトリの役割を詳細に説明します。

```
documents/
├── technical/            # 技術仕様や設計文書
│   ├── api/              # API仕様ドキュメント（エンドポイント定義、データモデル、認証方法など）
│   │   ├── api-overview.md   # API概要と共通仕様
│   │   ├── auth-api.md       # 認証API仕様
│   │   └── ...               # その他APIドキュメント
│   │
│   ├── architecture/     # アーキテクチャドキュメント（システム構成、コンポーネント間の関係など）
│   │   └── architecture-overview.md  # アーキテクチャ概要
│   │
│   ├── security/         # セキュリティ関連ドキュメント（認証フロー、権限管理など）
│   │   ├── security-design.md        # セキュリティ設計
│   │   ├── authentication-flow.md    # 認証フロー
│   │   └── user-roles-and-permissions.md # ユーザーロールと権限
│   │
│   ├── decisions/        # 意思決定記録（技術選定、アーキテクチャ決定など）
│   │   └── auth-system-selection.md  # 認証システム選定
│   │
│   └── designs/          # デザイン文書（UI/UX設計、画面遷移など）
│       └── login-screen-design.md    # ログイン画面デザイン
│
├── manuals/              # マニュアル・ガイド（開発者、運用担当者、文書作成者向け）
│   ├── developer/        # 開発者向けマニュアル（開発環境セットアップ、コーディング規約など）
│   │   └── ...           # 開発者向け各種ガイド
│   │
│   ├── operations/       # 運用担当者向けマニュアル（デプロイ手順、監視設定、障害対応など）
│   │   └── ...           # 運用担当者向け各種ガイド
│   │
│   ├── documentation/    # 文書作成者向けマニュアル（ドキュメント作成規約、テンプレートなど）
│   │   └── ...           # 文書作成者向け各種ガイド
│   │
│   └── guides/           # 一般的な開発・運用ガイド（特定の役割に限定されないもの）
│       └── aws-deployment-guide.md   # AWSデプロイガイド
│
├── project/              # プロジェクト管理関連の文書
│   ├── log/              # 時系列順の開発ログ（プロジェクトの歴史的記録）
│   │   └── project-record-XX-title.md  # 連番形式の開発記録
│   │
│   ├── records/          # トピック別に整理された開発記録（参照用）
│   │   ├── setup/        # セットアップ関連の記録
│   │   ├── svelte/       # Svelte関連の記録
│   │   └── mobile/       # モバイル関連の記録
│   │
│   └── phase_roadmap/    # フェーズごとのロードマップ（開発計画、マイルストーン）
│
├── learning/             # 学習リソース（技術学習のための資料）
│   └── svelte5-sveltekit2/  # Svelte 5とSvelteKit 2の学習資料（完全マニュアル）
│       ├── 01-introduction/  # 導入と基本概念
│       ├── 02-components/    # コンポーネント開発
│       ├── 03-routing/       # ルーティング
│       ├── 04-websockets/    # WebSockets実装ガイド（基本、応用、最適化、セキュリティなど）
│       │   ├── basics/       # WebSockets基本
│       │   ├── advanced/     # WebSockets応用
│       │   ├── optimization/ # WebSockets最適化
│       │   ├── security/     # WebSocketsセキュリティ
│       │   ├── monitoring/   # WebSockets監視
│       │   └── testing/      # WebSocketsテスト
│       └── 05-deployment/    # デプロイメント
│
└── templates/            # 文書テンプレート（新規ドキュメント作成用）
    ├── api-spec-template.md  # API仕様書テンプレート
    ├── decision-record-template.md  # 意思決定記録テンプレート
    └── project-record-template.md   # プロジェクト記録テンプレート
```

## 各ディレクトリの役割と目的

### 1. technical/ - 技術文書

技術仕様や設計に関する文書を格納するディレクトリです。システムの技術的な側面を理解するための一次資料となります。

- **api/**: API仕様を定義する文書。外部システムとの連携方法や内部モジュール間の通信方法を規定します。
- **architecture/**: システム全体のアーキテクチャを説明する文書。コンポーネント構成や相互関係を定義します。
- **security/**: セキュリティ関連の設計文書。認証方式、権限管理、データ保護などのセキュリティ対策を定義します。
- **decisions/**: 技術選定や設計上の重要な意思決定を記録する文書。決定理由や代替案の検討結果を含みます。
- **designs/**: UI/UXデザインや画面設計に関する文書。ユーザーインターフェースの仕様を定義します。

### 2. manuals/ - マニュアル・ガイド

システムの開発・運用・文書化に関するマニュアルやガイドを格納するディレクトリです。対象者別に整理されています。

- **developer/**: 開発者向けのマニュアル。開発環境のセットアップ方法やコーディング規約などを説明します。
- **operations/**: 運用担当者向けのマニュアル。デプロイ手順や監視設定、障害対応などを説明します。
- **documentation/**: 文書作成者向けのマニュアル。ドキュメント作成の規約やテンプレートの使用方法を説明します。
- **guides/**: 特定の役割に限定されない一般的なガイド。複数の役割に関わる手順や知識を提供します。

### 3. project/ - プロジェクト管理

プロジェクトの進捗管理や開発記録に関する文書を格納するディレクトリです。プロジェクトの歴史と計画を記録します。

- **log/**: 時系列順の開発ログ。プロジェクトの進捗を連番形式で記録する一次資料です。
- **records/**: トピック別に整理された開発記録。特定のトピックに関する情報を素早く見つけるための参照資料です。
  - **setup/**: 環境構築やプロジェクト初期設定に関する記録
  - **svelte/**: Svelte関連の開発記録
  - **mobile/**: モバイルアプリ開発に関する記録
- **phase_roadmap/**: 開発フェーズごとのロードマップ。計画と実際の進捗を管理します。

### 4. learning/ - 学習リソース

技術学習のための資料を格納するディレクトリです。プロジェクトで使用する技術の学習を支援します。

- **svelte5-sveltekit2/**: Svelte 5とSvelteKit 2の完全マニュアル。フロントエンド開発の主要技術の使用方法を説明します。
  - **01-introduction/**: 導入と基本概念
  - **02-components/**: コンポーネント開発
  - **03-routing/**: ルーティング
  - **04-websockets/**: WebSockets実装ガイド（基本、応用、最適化、セキュリティなど）
  - **05-deployment/**: デプロイメント

### 5. templates/ - 文書テンプレート

新規ドキュメント作成のためのテンプレートを格納するディレクトリです。ドキュメントの一貫性を確保します。

- **api-spec-template.md**: API仕様書作成用のテンプレート
- **decision-record-template.md**: 意思決定記録用のテンプレート
- **project-record-template.md**: プロジェクト記録用のテンプレート

## 主要ドキュメント一覧

### 1. 技術文書

- [**アーキテクチャ概要**](./technical/architecture/architecture-overview.md) - コンテナ化モジュラーモノリスアーキテクチャの全体像と設計思想
- [**API概要**](./technical/api/api-overview.md) - APIの基本構造と共通仕様
- [**認証API仕様**](./technical/api/auth-api.md) - 認証関連エンドポイントの詳細
- [**認証システム選定**](./technical/decisions/auth-system-selection.md) - 認証システムの比較と選定理由
- [**ユーザーロールと権限**](./technical/architecture/user-roles-and-permissions.md) - ユーザーロールと権限の定義

### 2. マニュアル・ガイド

- [**AWSデプロイガイド**](./manuals/guides/aws-deployment-guide.md) - AWS環境へのデプロイ手順
- [**開発環境セットアップ**](./manuals/guides/development-environment-setup.md) - 開発環境の構築方法

### 3. プロジェクト記録

- [**プロジェクトロードマップ**](./project/log/project-roadmap.md) - プロジェクト全体のロードマップ

### 4. 学習リソース

- [**Svelte 5 & SvelteKit 2**](./learning/svelte5-sveltekit2/) - Svelte 5とSvelteKit 2の学習資料

## システム構成図

```
┌─────────────────────────────────────────────────────────────────┐
│                      HugMeDo システム構成                        │
└─────────────────────────────────────────────────────────────────┘
                               │
           ┌──────────────────┴───────────────────┐
           ▼                                      ▼
┌─────────────────────┐              ┌─────────────────────────┐
│    フロントエンド    │              │      バックエンド       │
│  (SvelteKit/React)  │◄────────────►│  (Node.js/Express)     │
└─────────────────────┘              └─────────────────────────┘
                                                │
                      ┌───────────────────────┬─┴───────────────┐
                      ▼                       ▼                 ▼
          ┌─────────────────────┐ ┌─────────────────┐ ┌─────────────────┐
          │     コアモジュール   │ │   OHRモジュール  │ │  HALCAモジュール │
          │   (認証・DB・API)    │ │  (ビデオ通話)   │ │ (メンタルヘルス) │
          └─────────────────────┘ └─────────────────┘ └─────────────────┘
                      │                   │                   │
                      └───────────────────┴───────────────────┘
                                          │
                                          ▼
                      ┌─────────────────────────────────────┐
                      │           AWS クラウド              │
                      │  (ECS, RDS, Cognito, Chime SDK)    │
                      └─────────────────────────────────────┘
```

## 技術スタック

- **フロントエンド**: SvelteKit 2, Svelte 5, TypeScript
- **バックエンド**: Node.js, Express
- **データベース**: PostgreSQL
- **認証**: Amazon Cognito
- **ビデオ通話**: Amazon Chime SDK
- **コンテナ化**: Docker, Docker Compose
- **クラウド**: AWS (ECS, RDS, Cognito, etc.)
- **CI/CD**: GitHub Actions

## 開発ワークフロー

1. **環境セットップ**
   - Docker と Docker Compose のインストール
   - リポジトリのクローン
   - 依存関係のインストール (`pnpm install`)

2. **ローカル開発**
   - 開発サーバー起動 (`docker-compose up`)
   - コードの変更とテスト
   - コミット (`git commit -m "feat: 機能追加"`)

3. **デプロイ**
   - GitHub リポジトリへのプッシュ
   - CI/CD パイプラインによる自動テストとデプロイ
   - [AWSデプロイガイド](./manuals/guides/aws-deployment-guide.md)を参照

## ドキュメント間の関連性

```
┌─────────────────────────┐
│   アーキテクチャ概要    │
│ technical/architecture/ │
│ architecture-overview.md│
└───────────┬─────────────┘
            │
            │ 参照
            ▼
┌─────────────────────────┐     ┌─────────────────────────┐
│     認証システム選定     │────►│      AWSデプロイガイド   │
│ technical/decisions/    │     │ manuals/guides/        │
│ auth-system-selection.md│     │ aws-deployment-guide.md │
└───────────┬─────────────┘     └─────────────┬───────────┘
            │                                 │
            │ 実装                            │ 実装
            ▼                                 ▼
┌─────────────────────────┐     ┌─────────────────────────┐
│       API概要           │────►│      認証API仕様        │
│ technical/api/          │     │ technical/api/         │
│ api-overview.md         │     │ auth-api.md            │
└─────────────────────────┘     └─────────────────────────┘
```

## 新規開発者向けガイド

HugMeDoプロジェクトに参加する新規開発者は、以下の順序でドキュメントを読むことをお勧めします：

1. **[README.md](./README.md)** (このファイル) - プロジェクト全体の概要
2. **[アーキテクチャ概要](./technical/architecture/architecture-overview.md)** - システム設計の理解
3. **[API概要](./technical/api/api-overview.md)** - API構造の把握
4. **[AWSデプロイガイド](./manuals/guides/aws-deployment-guide.md)** - 開発環境のセットアップと本番環境の理解
5. **[ユーザーロールと権限](./technical/architecture/user-roles-and-permissions.md)** - ユーザーロールと権限の理解

## 貢献ガイドライン

1. **ブランチ戦略**
   - `main`: 安定版/本番用ブランチ
   - `develop`: 開発統合ブランチ
   - 機能ブランチ: `feature/機能名`
   - バグ修正: `bugfix/問題の簡潔な説明`
   - ホットフィックス: `hotfix/緊急修正の説明`

2. **コミットメッセージ規約**
   - `feat:` 新機能
   - `fix:` バグ修正
   - `docs:` ドキュメントのみの変更
   - `style:` コードの意味に影響しない変更（空白、フォーマット、セミコロンの欠落など）
   - `refactor:` バグを修正せず機能も追加しないコード変更
   - `test:` テストの追加または修正
   - `chore:` ビルドプロセスやツールの変更
   - `container:` コンテナ設定の変更

3. **コードレビュー基準**
   - セルフレビューを行ってからレビュー依頼
   - 少なくとも1人のチームメンバーの承認が必要
   - すべてのCIテストに合格すること
   - 医療情報を扱うコードは特に厳格なレビューが必要

## 連絡先

- **プロジェクト管理者**: project-admin@hugmedo.com
- **技術サポート**: tech-support@hugmedo.com
- **セキュリティ問題報告**: security@hugmedo.com

---

*このドキュメントは、HugMeDoプロジェクトの概要と構造を提供するものです。プロジェクトの進行に伴い、必要に応じて更新されます。*

最終更新: 2025-03-23
